<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Раскрой свой КРИСТАЛЛ ДУШИ</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{--bg:#0d1020;--ink:#eaf0ff;--muted:#a7b0d8;--radius:18px;--gap:14px;--shadow:0 10px 30px rgba(0,0,0,.35);--gold:#ffda6b}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:Manrope,system-ui,Arial,sans-serif}
  .wrap{max-width:980px;margin:auto;padding:22px}
  h1{margin:8px 0 16px;text-align:center;font-weight:900;letter-spacing:.4px;font-size:clamp(24px,4.8vw,44px)}
  h1 .glow{display:inline-block;color:#ffe69c;text-shadow:0 0 24px rgba(255,217,102,.6),0 0 48px rgba(255,217,102,.25)}

  .panel{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);
    border-radius:var(--radius);padding:16px;margin:16px 0}

  .row{display:flex;flex-wrap:wrap;gap:14px}
  .control{flex:1;min-width:240px}
  label{display:block;margin:0 0 6px 6px;font-size:13px;color:var(--muted)}
  input[type="text"],select{width:100%;padding:15px 14px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:#0f1533;color:var(--ink);outline:none}

  .btn{appearance:none;border:0;border-radius:14px;padding:15px 20px;font-weight:800;letter-spacing:.2px;cursor:pointer;transition:.2s transform,.2s box-shadow,.2s filter}
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:linear-gradient(135deg,#71e2ff,#7afcc5);color:#0b1230;box-shadow:0 10px 28px rgba(61,209,255,.28),inset 0 1px 0 rgba(255,255,255,.5)}
  .btn.primary:hover{box-shadow:0 14px 36px rgba(61,209,255,.36),inset 0 1px 0 rgba(255,255,255,.55)}
  .btn.ghost{background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));color:var(--ink);border:1px solid rgba(255,255,255,.16)}

  .vy{font-size:22px;font-weight:800;margin:8px 0 14px;text-align:center}

  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
  .cell{
    aspect-ratio:1/1;border-radius:18px;display:flex;align-items:center;justify-content:center;
    font-weight:900;font-size:32px;color:#0d1020;
    box-shadow:inset 0 0 0 1px rgba(0,0,0,.22), 0 10px 30px rgba(0,0,0,.28);
    position:relative; overflow:hidden;
    background-image:radial-gradient(circle at 50% 42%, rgba(255,255,255,.75) 0%, rgba(255,255,255,0) 56%);
  }
  .cell::after{content:""; position:absolute; inset:0; border-radius:inherit; box-shadow: inset 0 0 0 1px rgba(255,255,255,.12); pointer-events:none;}

  /* Палитра 1–12 */
  .n-1 { background: radial-gradient(circle at 50% 60%, #ffb3b3 0%, #ff6b6b 55%, #d93a3a 100%); }
  .n-2 { background: radial-gradient(circle at 50% 60%, #ffd1a6 0%, #ff9f43 55%, #d97600 100%); }
  .n-3 { background: radial-gradient(circle at 50% 60%, #ffeaa6 0%, #ffd43b 55%, #caa400 100%); }
  .n-4 { background: radial-gradient(circle at 50% 60%, #e7ffbf 0%, #a7ea5a 55%, #6ec100 100%); }
  .n-5 { color:#fff; text-shadow:0 1px 0 rgba(0,0,0,.45); background: radial-gradient(circle at 50% 60%, #bfe9c3 0%, #2e7d32 55%, #1f5a22 100%); }
  .n-6 { background: radial-gradient(circle at 50% 60%, #b9f5f2 0%, #36c0b9 55%, #1b8f89 100%); }
  .n-7 { color:#fff; text-shadow:0 1px 0 rgba(0,0,0,.45); background: radial-gradient(circle at 50% 60%, #b7d0ff 0%, #2f6ed8 55%, #17408b 100%); }
  .n-8 { background: radial-gradient(circle at 50% 60%, #c9e8ff 0%, #5aa9e6 55%, #2f78b7 100%); }
  .n-9 { color:#fff; text-shadow:0 1px 0 rgba(0,0,0,.45); background: radial-gradient(circle at 50% 60%, #e0c6ff 0%, #8b5cf6 55%, #5b22b0 100%); }
  .n-10{ background: radial-gradient(circle at 50% 60%, #ffd7ef 0%, #d66ad2 55%, #9b2fa2 100%); }
  .n-11{ background: radial-gradient(circle at 50% 60%, #ffc0da 0%, #ff4fa0 55%, #c60064 100%); }
  .n-12{ background: radial-gradient(circle at 50% 60%, #ffe1ec 0%, #ff9bc2 55%, #ff6b9e 100%); }

  /* ВИБРАЦИОННАЯ ПОДПИСЬ */
  #signature {
    display:none;
    margin-top:26px;
    border:2px solid var(--gold);
    border-radius:16px;
    padding:16px;
    text-align:center;
    font-weight:800;
    color:var(--gold);
    font-size:22px;
    box-shadow:0 0 22px rgba(255,218,107,.35);
    animation:fadeIn .8s ease forwards;
  }
  @keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:none} }

</style>
</head>
<body>
<div class="wrap">
  <h1><span>Раскрой свой</span><br><span class="glow">КРИСТАЛЛ ДУШИ</span></h1>

  <section class="panel">
    <div class="row">
      <div class="control" style="flex:2">
        <label>Дата рождения</label>
        <input id="dob" type="text" inputmode="numeric" maxlength="8" placeholder="ДДММГГГГ">
      </div>
      <div class="control">
        <button id="calc" class="btn primary">Рассчитать</button>
      </div>
    </div>
  </section>

  <section class="panel" id="panel-matrix">
    <div class="vy">Уровень Высшего Я: <span id="vyVal">—</span></div>
    <div id="grid" class="grid">
      <div class="cell" id="P10">—</div><div class="cell" id="P11">—</div><div class="cell" id="P12">—</div>
      <div class="cell" id="P7">—</div><div class="cell" id="P8">—</div><div class="cell" id="P9">—</div>
      <div class="cell" id="P4">—</div><div class="cell" id="P5">—</div><div class="cell" id="P6">—</div>
      <div class="cell" id="P1">—</div><div class="cell" id="P2">—</div><div class="cell" id="P3">—</div>
    </div>
  </section>

  <div id="signature">ВАША ВИБРАЦИОННАЯ ПОДПИСЬ ДУШИ: <span id="sigVal"></span></div>

<script>
function reduce12(n){
  while(n>12){n = String(n).split('').reduce((a,b)=>a+ +b,0);}
  return n;
}
function reduce9(n){
  while(n>9){n = String(n).split('').reduce((a,b)=>a+ +b,0);}
  return n;
}

function calc(){
  const v = document.getElementById('dob').value.replace(/\D/g,'');
  if(v.length!==8) return alert("Введите дату в формате ДДММГГГГ");

  const d = +v.slice(0,2);
  const m = +v.slice(2,4);
  const y = +v.slice(4);
  const yy = +v.slice(2,4);

  // Высшее Я
  const yPart = (y<2000?19:20) + reduce9(+String(y).slice(2));
  const vy = d + m + yPart;

  document.getElementById('vyVal').textContent = vy;

  // Пример расчета кодов (для демонстрации)
  const N1 = reduce12(d);
  const N2 = reduce12(m);
  const N3 = reduce12(N1 + N2);
  const T1 = reduce12(m);
  const T2 = reduce12(yy);
  const T3 = reduce12(T1 + T2);
  const C1 = reduce12(yPart);
  const C2 = reduce12(d);
  const C3 = reduce12(C1 + C2);

  // Визуализация
  const ids = ['P1','P2','P3','P4','P5','P6','P7','P8','P9','P10','P11','P12'];
  ids.forEach(id=>{document.getElementById(id).textContent=''; document.getElementById(id).className='cell';});
  document.getElementById('P1').textContent=N1;document.getElementById('P1').classList.add('n-'+N1);
  document.getElementById('P2').textContent=N2;document.getElementById('P2').classList.add('n-'+N2);
  document.getElementById('P3').textContent=N3;document.getElementById('P3').classList.add('n-'+N3);

  // Подпись души
  const sig = `${N3} – ${T3} – ${C3}`;
  const sigBox = document.getElementById('signature');
  document.getElementById('sigVal').textContent = sig;
  sigBox.style.display='block';
}

document.getElementById('calc').addEventListener('click',calc);
</script>
</div>
</body>
</html>
